# See https://github.com/dart-lang/mono_repo for details
dart:
  - 2.2.2
  - stable

stages:
  - pre_analyzer:
      - command: pub run build_runner build --delete-conflicting-outputs
  - analyzer_and_format:
      - group:
          - dartfmt
          - dartanalyzer: --fatal-warnings --fatal-infos .
        dart: [stable]
      - group:
          - dartanalyzer: --fatal-warnings .
        dart: [2.2.2]
  - unit_test:
      - test
      - command: pub run build_runner test --delete-conflicting-outputs

cache:
  directories:
    - .dart_tool/build